#include "menu.h"

lv_obj_t * ui_menu;
lv_obj_t * change_label;


static const char* button_map[] = {"Automatic","\n","Manual",""};

static void event_button(lv_event_t *e)
{

}

void set_screen()
{
	/*Change the active screen's background color*/
	lv_obj_set_style_bg_color(lv_scr_act(), lv_color_hex(0x282a36), LV_PART_MAIN);
}

void menu_init()
{
	// test text stuff
	lv_obj_t* text_area= lv_obj_create(lv_scr_act());
	lv_obj_set_size(text_area,50,20);
	lv_obj_align(text_area, LV_ALIGN_BOTTOM_LEFT, 0, 0);

	change_label = lv_label_create(text_area);
	lv_label_set_text(change_label,"Text");
	lv_obj_center(change_label);

	ui_menu = lv_obj_create(lv_scr_act());
	lv_obj_set_size();

	// Mode buttons with button matrix
	lv_obj_t * button_modes = lv_btnmatrix_create(lv_scr_act());
	lv_btnmatrix_set_map(button_modes,button_map);
	lv_btnmatrix_set_btn_ctrl_all(button_modes, LV_BTNMATRIX_CTRL_CHECKABLE); // make it so button is filled when pressed
	lv_btnmatrix_set_one_checked(button_modes, true); // only one button filled at time
	lv_btnmatrix_set_btn_ctrl(button_modes, 1, LV_BTNMATRIX_CTRL_CHECKED); // set manual mode automatically filled
	lv_obj_align(button_modes, LV_ALIGN_CENTER, 0, 0);
	lv_obj_add_event_cb(button_modes, event_button, LV_EVENT_ALL, NULL);
	lv_obj_set_style_bg_color(button_modes,lv_color_hex(0x282a36),LV_PART_MAIN);

}

void change_text(char* msg)
{
	lv_label_set_text(change_label,msg);
}
